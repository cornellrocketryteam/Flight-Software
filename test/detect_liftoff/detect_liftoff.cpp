/**
 * @file detect_liftoff.cpp
 * @author csg83
 * 
 * @brief Unit test of the algorithm to detect liftoff via an exponential weighted moving average (EWMA)
 */

#include <iostream>

float data[] = { 1.056, 0.960, 0.960, 1.008, 0.960, 0.960, 0.960, 0.864, 1.008, 0.864, 1.104, 0.960, 1.008, 0.960, 1.008, 1.008, 1.008, 0.960, 1.008, 1.008, 0.960, 0.912, 1.008, 1.008, 0.960, 0.912, 0.912, 0.960, 0.960, 1.008, 0.960, 0.912, 1.008, 0.960, 1.008, 1.008, 0.960, 1.056, 1.056, 0.912, 1.008, 1.056, 1.056, 1.104, 0.960, 1.008, 1.008, 1.056, 1.008, 0.960, 0.960, 0.960, 1.008, 0.912, 1.056, 1.008, 1.008, 1.104, 1.008, 1.008, 2.857, 6.72, 6.73, 6.74, 6.75, 6.76, 6.771, 6.781, 6.791, 6.801, 6.811, 6.821, 6.832, 6.841, 6.851, 6.861, 6.87, 6.879, 6.887, 6.898, 6.915, 6.939, 6.974, 7.016, 7.06, 7.101, 7.142, 7.18, 7.217, 7.252, 7.285,7.318, 7.347, 7.376, 7.402, 7.427, 7.45, 7.47, 7.49, 7.507, 7.522, 7.536, 7.546, 7.556, 7.563, 7.568, 7.572, 7.572, 7.572, 7.568, 7.563, 7.555, 7.545, 7.533, 7.518, 7.503, 7.484, 7.463, 7.441, 7.416, 7.39, 7.361, 7.331, 7.298, 7.263, 7.227, 7.188, 7.147, 7.104, 7.059, 7.011, 6.961, 6.91, 6.855, 6.799, 6.74, 6.68, 6.618, 6.552, 6.486, 6.416, 6.346, 6.273, 6.198, 6.122, 6.043, 5.963, 5.882, 5.799, 5.714, 5.628, 5.513, 4.847, 3.967, 3.136, 2.388, 1.72, 1.581, 1.546, 1.51, 1.473, 1.316, 0.761, 0.197 };

int main() {
    int size = 10;
    float buffer[size];
    float sum = 0;
    int index = 0;

    for (unsigned int i = 0; i < size; i++) {
        buffer[i] = 0;
    }

    for (unsigned int i = 0; i < sizeof(data) / sizeof(float); i++) {
        sum -= buffer[index];
        buffer[index] = data[i];
        sum += data[i];

        index++;
        if (index == 10) { index = 0; }

        std::cout << sum * .1 << std::endl;
    }

    return 0;
}